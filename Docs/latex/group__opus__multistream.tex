\hypertarget{group__opus__multistream}{}\section{Opus Multistream A\+PI}
\label{group__opus__multistream}\index{Opus Multistream API@{Opus Multistream API}}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef struct \mbox{\hyperlink{group__opus__multistream_gae5826674d142fc873ebc1d781c507dd7}{Opus\+M\+S\+Encoder}} \mbox{\hyperlink{group__opus__multistream_gae5826674d142fc873ebc1d781c507dd7}{Opus\+M\+S\+Encoder}}
\item 
typedef struct \mbox{\hyperlink{group__opus__multistream_gad3497495deb9a8ace82e76cd4f93e0e4}{Opus\+M\+S\+Decoder}} \mbox{\hyperlink{group__opus__multistream_gad3497495deb9a8ace82e76cd4f93e0e4}{Opus\+M\+S\+Decoder}}
\end{DoxyCompactItemize}
\subsection*{Multistream encoder functions}
\begin{DoxyCompactItemize}
\item 
O\+P\+U\+S\+\_\+\+E\+X\+P\+O\+RT O\+P\+U\+S\+\_\+\+W\+A\+R\+N\+\_\+\+U\+N\+U\+S\+E\+D\+\_\+\+R\+E\+S\+U\+LT \mbox{\hyperlink{opus__types_8h_aa4d309d6f80b99dbabebc8f98879ab9a}{opus\+\_\+int32}} \mbox{\hyperlink{group__opus__multistream_ga598e82225e53af23017e0c96f4eaf3b4}{opus\+\_\+multistream\+\_\+encoder\+\_\+get\+\_\+size}} (int streams, int coupled\+\_\+streams)
\item 
O\+P\+U\+S\+\_\+\+E\+X\+P\+O\+RT O\+P\+U\+S\+\_\+\+W\+A\+R\+N\+\_\+\+U\+N\+U\+S\+E\+D\+\_\+\+R\+E\+S\+U\+LT \mbox{\hyperlink{opus__types_8h_aa4d309d6f80b99dbabebc8f98879ab9a}{opus\+\_\+int32}} \mbox{\hyperlink{group__opus__multistream_ga21bf3d342217f28822f676b17bd21144}{opus\+\_\+multistream\+\_\+surround\+\_\+encoder\+\_\+get\+\_\+size}} (int channels, int mapping\+\_\+family)
\item 
O\+P\+U\+S\+\_\+\+E\+X\+P\+O\+RT O\+P\+U\+S\+\_\+\+W\+A\+R\+N\+\_\+\+U\+N\+U\+S\+E\+D\+\_\+\+R\+E\+S\+U\+LT \mbox{\hyperlink{group__opus__multistream_gae5826674d142fc873ebc1d781c507dd7}{Opus\+M\+S\+Encoder}} $\ast$ \mbox{\hyperlink{group__opus__multistream_ga984c19f4faa4db82370eb907f8eaf452}{opus\+\_\+multistream\+\_\+encoder\+\_\+create}} (\mbox{\hyperlink{opus__types_8h_aa4d309d6f80b99dbabebc8f98879ab9a}{opus\+\_\+int32}} Fs, int channels, int streams, int coupled\+\_\+streams, const unsigned char $\ast$\mbox{\hyperlink{_s_d_l__opengl__glext_8h_aa4f194e5160ccbb5a8e83ab6ef4676d2}{mapping}}, int application, int $\ast$error) O\+P\+U\+S\+\_\+\+A\+R\+G\+\_\+\+N\+O\+N\+N\+U\+LL(5)
\item 
O\+P\+U\+S\+\_\+\+E\+X\+P\+O\+RT O\+P\+U\+S\+\_\+\+W\+A\+R\+N\+\_\+\+U\+N\+U\+S\+E\+D\+\_\+\+R\+E\+S\+U\+LT \mbox{\hyperlink{group__opus__multistream_gae5826674d142fc873ebc1d781c507dd7}{Opus\+M\+S\+Encoder}} $\ast$ \mbox{\hyperlink{group__opus__multistream_ga1358d7af19572d163ec982447aa20ee9}{opus\+\_\+multistream\+\_\+surround\+\_\+encoder\+\_\+create}} (\mbox{\hyperlink{opus__types_8h_aa4d309d6f80b99dbabebc8f98879ab9a}{opus\+\_\+int32}} Fs, int channels, int mapping\+\_\+family, int $\ast$streams, int $\ast$coupled\+\_\+streams, unsigned char $\ast$\mbox{\hyperlink{_s_d_l__opengl__glext_8h_aa4f194e5160ccbb5a8e83ab6ef4676d2}{mapping}}, int application, int $\ast$error) O\+P\+U\+S\+\_\+\+A\+R\+G\+\_\+\+N\+O\+N\+N\+U\+LL(5)
\item 
O\+P\+U\+S\+\_\+\+E\+X\+P\+O\+RT int \mbox{\hyperlink{group__opus__multistream_gaf9045180b3a93d7cc3d1197859b767a8}{opus\+\_\+multistream\+\_\+encoder\+\_\+init}} (\mbox{\hyperlink{group__opus__multistream_gae5826674d142fc873ebc1d781c507dd7}{Opus\+M\+S\+Encoder}} $\ast$st, \mbox{\hyperlink{opus__types_8h_aa4d309d6f80b99dbabebc8f98879ab9a}{opus\+\_\+int32}} Fs, int channels, int streams, int coupled\+\_\+streams, const unsigned char $\ast$\mbox{\hyperlink{_s_d_l__opengl__glext_8h_aa4f194e5160ccbb5a8e83ab6ef4676d2}{mapping}}, int application) O\+P\+U\+S\+\_\+\+A\+R\+G\+\_\+\+N\+O\+N\+N\+U\+LL(1) O\+P\+U\+S\+\_\+\+A\+R\+G\+\_\+\+N\+O\+N\+N\+U\+LL(6)
\item 
O\+P\+U\+S\+\_\+\+E\+X\+P\+O\+RT int \mbox{\hyperlink{group__opus__multistream_ga786d90cfe8f8b8f371b0137ac76b1559}{opus\+\_\+multistream\+\_\+surround\+\_\+encoder\+\_\+init}} (\mbox{\hyperlink{group__opus__multistream_gae5826674d142fc873ebc1d781c507dd7}{Opus\+M\+S\+Encoder}} $\ast$st, \mbox{\hyperlink{opus__types_8h_aa4d309d6f80b99dbabebc8f98879ab9a}{opus\+\_\+int32}} Fs, int channels, int mapping\+\_\+family, int $\ast$streams, int $\ast$coupled\+\_\+streams, unsigned char $\ast$\mbox{\hyperlink{_s_d_l__opengl__glext_8h_aa4f194e5160ccbb5a8e83ab6ef4676d2}{mapping}}, int application) O\+P\+U\+S\+\_\+\+A\+R\+G\+\_\+\+N\+O\+N\+N\+U\+LL(1) O\+P\+U\+S\+\_\+\+A\+R\+G\+\_\+\+N\+O\+N\+N\+U\+LL(6)
\item 
O\+P\+U\+S\+\_\+\+E\+X\+P\+O\+RT O\+P\+U\+S\+\_\+\+W\+A\+R\+N\+\_\+\+U\+N\+U\+S\+E\+D\+\_\+\+R\+E\+S\+U\+LT int \mbox{\hyperlink{group__opus__multistream_ga5276a2212541e65624f52e906d3dff42}{opus\+\_\+multistream\+\_\+encode}} (\mbox{\hyperlink{group__opus__multistream_gae5826674d142fc873ebc1d781c507dd7}{Opus\+M\+S\+Encoder}} $\ast$st, const \mbox{\hyperlink{opus__types_8h_acc9ed7cf60479eb81f9648c6ec27dc26}{opus\+\_\+int16}} $\ast$pcm, int frame\+\_\+size, unsigned char $\ast$\mbox{\hyperlink{_s_d_l__opengl_8h_a2e335d56e2846b0fea47eed068b2d34a}{data}}, \mbox{\hyperlink{opus__types_8h_aa4d309d6f80b99dbabebc8f98879ab9a}{opus\+\_\+int32}} max\+\_\+data\+\_\+bytes) O\+P\+U\+S\+\_\+\+A\+R\+G\+\_\+\+N\+O\+N\+N\+U\+LL(1) O\+P\+U\+S\+\_\+\+A\+R\+G\+\_\+\+N\+O\+N\+N\+U\+LL(2) O\+P\+U\+S\+\_\+\+A\+R\+G\+\_\+\+N\+O\+N\+N\+U\+LL(4)
\item 
O\+P\+U\+S\+\_\+\+E\+X\+P\+O\+RT O\+P\+U\+S\+\_\+\+W\+A\+R\+N\+\_\+\+U\+N\+U\+S\+E\+D\+\_\+\+R\+E\+S\+U\+LT int \mbox{\hyperlink{group__opus__multistream_gabc78b732d2e7b6ceb27c63888255ef56}{opus\+\_\+multistream\+\_\+encode\+\_\+float}} (\mbox{\hyperlink{group__opus__multistream_gae5826674d142fc873ebc1d781c507dd7}{Opus\+M\+S\+Encoder}} $\ast$st, const float $\ast$pcm, int frame\+\_\+size, unsigned char $\ast$\mbox{\hyperlink{_s_d_l__opengl_8h_a2e335d56e2846b0fea47eed068b2d34a}{data}}, \mbox{\hyperlink{opus__types_8h_aa4d309d6f80b99dbabebc8f98879ab9a}{opus\+\_\+int32}} max\+\_\+data\+\_\+bytes) O\+P\+U\+S\+\_\+\+A\+R\+G\+\_\+\+N\+O\+N\+N\+U\+LL(1) O\+P\+U\+S\+\_\+\+A\+R\+G\+\_\+\+N\+O\+N\+N\+U\+LL(2) O\+P\+U\+S\+\_\+\+A\+R\+G\+\_\+\+N\+O\+N\+N\+U\+LL(4)
\item 
O\+P\+U\+S\+\_\+\+E\+X\+P\+O\+RT \mbox{\hyperlink{_s_d_l__opengles2__gl2ext_8h_ae5d8fa23ad07c48bb609509eae494c95}{void}} \mbox{\hyperlink{group__opus__multistream_ga24b8a4ceb20a142069084cb1edd28a30}{opus\+\_\+multistream\+\_\+encoder\+\_\+destroy}} (\mbox{\hyperlink{group__opus__multistream_gae5826674d142fc873ebc1d781c507dd7}{Opus\+M\+S\+Encoder}} $\ast$st)
\item 
O\+P\+U\+S\+\_\+\+E\+X\+P\+O\+RT int \mbox{\hyperlink{group__opus__multistream_ga0f8756c84c7c62a38f99fb5cd6ed68af}{opus\+\_\+multistream\+\_\+encoder\+\_\+ctl}} (\mbox{\hyperlink{group__opus__multistream_gae5826674d142fc873ebc1d781c507dd7}{Opus\+M\+S\+Encoder}} $\ast$st, int request,...) O\+P\+U\+S\+\_\+\+A\+R\+G\+\_\+\+N\+O\+N\+N\+U\+LL(1)
\end{DoxyCompactItemize}
\subsection*{Multistream decoder functions}
\begin{DoxyCompactItemize}
\item 
O\+P\+U\+S\+\_\+\+E\+X\+P\+O\+RT O\+P\+U\+S\+\_\+\+W\+A\+R\+N\+\_\+\+U\+N\+U\+S\+E\+D\+\_\+\+R\+E\+S\+U\+LT \mbox{\hyperlink{opus__types_8h_aa4d309d6f80b99dbabebc8f98879ab9a}{opus\+\_\+int32}} \mbox{\hyperlink{group__opus__multistream_gad4e534e2ee78039fff01cd0c6f7c1dd1}{opus\+\_\+multistream\+\_\+decoder\+\_\+get\+\_\+size}} (int streams, int coupled\+\_\+streams)
\item 
O\+P\+U\+S\+\_\+\+E\+X\+P\+O\+RT O\+P\+U\+S\+\_\+\+W\+A\+R\+N\+\_\+\+U\+N\+U\+S\+E\+D\+\_\+\+R\+E\+S\+U\+LT \mbox{\hyperlink{group__opus__multistream_gad3497495deb9a8ace82e76cd4f93e0e4}{Opus\+M\+S\+Decoder}} $\ast$ \mbox{\hyperlink{group__opus__multistream_ga0dc5378a3d4c65498cf530e450b56aa1}{opus\+\_\+multistream\+\_\+decoder\+\_\+create}} (\mbox{\hyperlink{opus__types_8h_aa4d309d6f80b99dbabebc8f98879ab9a}{opus\+\_\+int32}} Fs, int channels, int streams, int coupled\+\_\+streams, const unsigned char $\ast$\mbox{\hyperlink{_s_d_l__opengl__glext_8h_aa4f194e5160ccbb5a8e83ab6ef4676d2}{mapping}}, int $\ast$error) O\+P\+U\+S\+\_\+\+A\+R\+G\+\_\+\+N\+O\+N\+N\+U\+LL(5)
\item 
O\+P\+U\+S\+\_\+\+E\+X\+P\+O\+RT int \mbox{\hyperlink{group__opus__multistream_gac9680d4205a5ea95785e747f0d2e393b}{opus\+\_\+multistream\+\_\+decoder\+\_\+init}} (\mbox{\hyperlink{group__opus__multistream_gad3497495deb9a8ace82e76cd4f93e0e4}{Opus\+M\+S\+Decoder}} $\ast$st, \mbox{\hyperlink{opus__types_8h_aa4d309d6f80b99dbabebc8f98879ab9a}{opus\+\_\+int32}} Fs, int channels, int streams, int coupled\+\_\+streams, const unsigned char $\ast$\mbox{\hyperlink{_s_d_l__opengl__glext_8h_aa4f194e5160ccbb5a8e83ab6ef4676d2}{mapping}}) O\+P\+U\+S\+\_\+\+A\+R\+G\+\_\+\+N\+O\+N\+N\+U\+LL(1) O\+P\+U\+S\+\_\+\+A\+R\+G\+\_\+\+N\+O\+N\+N\+U\+LL(6)
\item 
O\+P\+U\+S\+\_\+\+E\+X\+P\+O\+RT O\+P\+U\+S\+\_\+\+W\+A\+R\+N\+\_\+\+U\+N\+U\+S\+E\+D\+\_\+\+R\+E\+S\+U\+LT int \mbox{\hyperlink{group__opus__multistream_ga2db65790cd7e0890a031b2eb17452d7b}{opus\+\_\+multistream\+\_\+decode}} (\mbox{\hyperlink{group__opus__multistream_gad3497495deb9a8ace82e76cd4f93e0e4}{Opus\+M\+S\+Decoder}} $\ast$st, const unsigned char $\ast$\mbox{\hyperlink{_s_d_l__opengl_8h_a2e335d56e2846b0fea47eed068b2d34a}{data}}, \mbox{\hyperlink{opus__types_8h_aa4d309d6f80b99dbabebc8f98879ab9a}{opus\+\_\+int32}} \mbox{\hyperlink{_s_d_l__opengl__glext_8h_a652168017ea9a8bbcead03d5c16269fb}{len}}, \mbox{\hyperlink{opus__types_8h_acc9ed7cf60479eb81f9648c6ec27dc26}{opus\+\_\+int16}} $\ast$pcm, int frame\+\_\+size, int decode\+\_\+fec) O\+P\+U\+S\+\_\+\+A\+R\+G\+\_\+\+N\+O\+N\+N\+U\+LL(1) O\+P\+U\+S\+\_\+\+A\+R\+G\+\_\+\+N\+O\+N\+N\+U\+LL(4)
\item 
O\+P\+U\+S\+\_\+\+E\+X\+P\+O\+RT O\+P\+U\+S\+\_\+\+W\+A\+R\+N\+\_\+\+U\+N\+U\+S\+E\+D\+\_\+\+R\+E\+S\+U\+LT int \mbox{\hyperlink{group__opus__multistream_ga32b004586f69b063a447e123e6a2c151}{opus\+\_\+multistream\+\_\+decode\+\_\+float}} (\mbox{\hyperlink{group__opus__multistream_gad3497495deb9a8ace82e76cd4f93e0e4}{Opus\+M\+S\+Decoder}} $\ast$st, const unsigned char $\ast$\mbox{\hyperlink{_s_d_l__opengl_8h_a2e335d56e2846b0fea47eed068b2d34a}{data}}, \mbox{\hyperlink{opus__types_8h_aa4d309d6f80b99dbabebc8f98879ab9a}{opus\+\_\+int32}} \mbox{\hyperlink{_s_d_l__opengl__glext_8h_a652168017ea9a8bbcead03d5c16269fb}{len}}, float $\ast$pcm, int frame\+\_\+size, int decode\+\_\+fec) O\+P\+U\+S\+\_\+\+A\+R\+G\+\_\+\+N\+O\+N\+N\+U\+LL(1) O\+P\+U\+S\+\_\+\+A\+R\+G\+\_\+\+N\+O\+N\+N\+U\+LL(4)
\item 
O\+P\+U\+S\+\_\+\+E\+X\+P\+O\+RT int \mbox{\hyperlink{group__opus__multistream_ga3c6402c3bb276d7a152d9934ce948431}{opus\+\_\+multistream\+\_\+decoder\+\_\+ctl}} (\mbox{\hyperlink{group__opus__multistream_gad3497495deb9a8ace82e76cd4f93e0e4}{Opus\+M\+S\+Decoder}} $\ast$st, int request,...) O\+P\+U\+S\+\_\+\+A\+R\+G\+\_\+\+N\+O\+N\+N\+U\+LL(1)
\item 
O\+P\+U\+S\+\_\+\+E\+X\+P\+O\+RT \mbox{\hyperlink{_s_d_l__opengles2__gl2ext_8h_ae5d8fa23ad07c48bb609509eae494c95}{void}} \mbox{\hyperlink{group__opus__multistream_ga314b439b06efd9463caa5039c1198f6c}{opus\+\_\+multistream\+\_\+decoder\+\_\+destroy}} (\mbox{\hyperlink{group__opus__multistream_gad3497495deb9a8ace82e76cd4f93e0e4}{Opus\+M\+S\+Decoder}} $\ast$st)
\end{DoxyCompactItemize}


\subsection{Detailed Description}
The multistream A\+PI allows individual Opus streams to be combined into a single packet, enabling support for up to 255 channels. Unlike an elementary Opus stream, the encoder and decoder must negotiate the channel configuration before the decoder can successfully interpret the data in the packets produced by the encoder. Some basic information, such as packet duration, can be computed without any special negotiation.

The format for multistream Opus packets is defined in the \href{http://tools.ietf.org/html/draft-terriberry-oggopus}{\texttt{ Ogg encapsulation specification}} and is based on the self-\/delimited Opus framing described in Appendix B of \href{http://tools.ietf.org/html/rfc6716}{\texttt{ R\+FC 6716}}. Normal Opus packets are just a degenerate case of multistream Opus packets, and can be encoded or decoded with the multistream A\+PI by setting {\ttfamily streams} to {\ttfamily 1} when initializing the encoder or decoder.

Multistream Opus streams can contain up to 255 elementary Opus streams. These may be either \char`\"{}uncoupled\char`\"{} or \char`\"{}coupled\char`\"{}, indicating that the decoder is configured to decode them to either 1 or 2 channels, respectively. The streams are ordered so that all coupled streams appear at the beginning.

A {\ttfamily mapping} table defines which decoded channel {\ttfamily i} should be used for each input/output (I/O) channel {\ttfamily j}. This table is typically provided as an unsigned char array. Let {\ttfamily i = mapping\mbox{[}j\mbox{]}} be the index for I/O channel {\ttfamily j}. If {\ttfamily i $<$ 2$\ast$coupled\+\_\+streams}, then I/O channel {\ttfamily j} is encoded as the left channel of stream {\ttfamily (i/2)} if {\ttfamily i} is even, or as the right channel of stream {\ttfamily (i/2)} if {\ttfamily i} is odd. Otherwise, I/O channel {\ttfamily j} is encoded as mono in stream {\ttfamily (i -\/ coupled\+\_\+streams)}, unless it has the special value 255, in which case it is omitted from the encoding entirely (the decoder will reproduce it as silence). Each value {\ttfamily i} must either be the special value 255 or be less than {\ttfamily streams + coupled\+\_\+streams}.

The output channels specified by the encoder should use the \href{http://www.xiph.org/vorbis/doc/Vorbis_I_spec.html\#x1-800004.3.9}{\texttt{ Vorbis channel ordering}}. A decoder may wish to apply an additional permutation to the mapping the encoder used to achieve a different output channel order (e.\+g. for outputing in W\+AV order).

Each multistream packet contains an Opus packet for each stream, and all of the Opus packets in a single multistream packet must have the same duration. Therefore the duration of a multistream packet can be extracted from the T\+OC sequence of the first stream, which is located at the beginning of the packet, just like an elementary Opus stream\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keywordtype}{int} nb\_samples;}
\DoxyCodeLine{\textcolor{keywordtype}{int} nb\_frames;}
\DoxyCodeLine{nb\_frames = \mbox{\hyperlink{group__opus__decoder_ga932edb5fbae85cf452650ef390f52849}{opus\_packet\_get\_nb\_frames}}(\mbox{\hyperlink{_s_d_l__opengl_8h_a2e335d56e2846b0fea47eed068b2d34a}{data}}, \mbox{\hyperlink{_s_d_l__opengl__glext_8h_a652168017ea9a8bbcead03d5c16269fb}{len}});}
\DoxyCodeLine{\textcolor{keywordflow}{if} (nb\_frames < 1)}
\DoxyCodeLine{  \textcolor{keywordflow}{return} nb\_frames;}
\DoxyCodeLine{nb\_samples = \mbox{\hyperlink{group__opus__decoder_ga885564fa670e308100dfda89d3cdea10}{opus\_packet\_get\_samples\_per\_frame}}(\mbox{\hyperlink{_s_d_l__opengl_8h_a2e335d56e2846b0fea47eed068b2d34a}{data}}, 48000) * nb\_frames;}
\end{DoxyCode}


The general encoding and decoding process proceeds exactly the same as in the normal \mbox{\hyperlink{group__opus__encoder}{Opus Encoder}} and \mbox{\hyperlink{group__opus__decoder}{Opus Decoder}} A\+P\+Is. See their documentation for an overview of how to use the corresponding multistream functions. 

\subsection{Typedef Documentation}
\mbox{\Hypertarget{group__opus__multistream_gad3497495deb9a8ace82e76cd4f93e0e4}\label{group__opus__multistream_gad3497495deb9a8ace82e76cd4f93e0e4}} 
\index{Opus Multistream API@{Opus Multistream API}!OpusMSDecoder@{OpusMSDecoder}}
\index{OpusMSDecoder@{OpusMSDecoder}!Opus Multistream API@{Opus Multistream API}}
\subsubsection{\texorpdfstring{OpusMSDecoder}{OpusMSDecoder}}
{\footnotesize\ttfamily typedef struct \mbox{\hyperlink{group__opus__multistream_gad3497495deb9a8ace82e76cd4f93e0e4}{Opus\+M\+S\+Decoder}} \mbox{\hyperlink{group__opus__multistream_gad3497495deb9a8ace82e76cd4f93e0e4}{Opus\+M\+S\+Decoder}}}

Opus multistream decoder state. This contains the complete state of a multistream Opus decoder. It is position independent and can be freely copied. \begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{group__opus__multistream_ga0dc5378a3d4c65498cf530e450b56aa1}{opus\+\_\+multistream\+\_\+decoder\+\_\+create}} 

\mbox{\hyperlink{group__opus__multistream_gac9680d4205a5ea95785e747f0d2e393b}{opus\+\_\+multistream\+\_\+decoder\+\_\+init}} 
\end{DoxySeeAlso}


Definition at line 183 of file opus\+\_\+multistream.\+h.

\mbox{\Hypertarget{group__opus__multistream_gae5826674d142fc873ebc1d781c507dd7}\label{group__opus__multistream_gae5826674d142fc873ebc1d781c507dd7}} 
\index{Opus Multistream API@{Opus Multistream API}!OpusMSEncoder@{OpusMSEncoder}}
\index{OpusMSEncoder@{OpusMSEncoder}!Opus Multistream API@{Opus Multistream API}}
\subsubsection{\texorpdfstring{OpusMSEncoder}{OpusMSEncoder}}
{\footnotesize\ttfamily typedef struct \mbox{\hyperlink{group__opus__multistream_gae5826674d142fc873ebc1d781c507dd7}{Opus\+M\+S\+Encoder}} \mbox{\hyperlink{group__opus__multistream_gae5826674d142fc873ebc1d781c507dd7}{Opus\+M\+S\+Encoder}}}

Opus multistream encoder state. This contains the complete state of a multistream Opus encoder. It is position independent and can be freely copied. \begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{group__opus__multistream_ga984c19f4faa4db82370eb907f8eaf452}{opus\+\_\+multistream\+\_\+encoder\+\_\+create}} 

\mbox{\hyperlink{group__opus__multistream_gaf9045180b3a93d7cc3d1197859b767a8}{opus\+\_\+multistream\+\_\+encoder\+\_\+init}} 
\end{DoxySeeAlso}


Definition at line 175 of file opus\+\_\+multistream.\+h.



\subsection{Function Documentation}
\mbox{\Hypertarget{group__opus__multistream_ga2db65790cd7e0890a031b2eb17452d7b}\label{group__opus__multistream_ga2db65790cd7e0890a031b2eb17452d7b}} 
\index{Opus Multistream API@{Opus Multistream API}!opus\_multistream\_decode@{opus\_multistream\_decode}}
\index{opus\_multistream\_decode@{opus\_multistream\_decode}!Opus Multistream API@{Opus Multistream API}}
\subsubsection{\texorpdfstring{opus\_multistream\_decode()}{opus\_multistream\_decode()}}
{\footnotesize\ttfamily O\+P\+U\+S\+\_\+\+E\+X\+P\+O\+RT O\+P\+U\+S\+\_\+\+W\+A\+R\+N\+\_\+\+U\+N\+U\+S\+E\+D\+\_\+\+R\+E\+S\+U\+LT int opus\+\_\+multistream\+\_\+decode (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{group__opus__multistream_gad3497495deb9a8ace82e76cd4f93e0e4}{Opus\+M\+S\+Decoder}} $\ast$}]{st,  }\item[{const unsigned char $\ast$}]{data,  }\item[{\mbox{\hyperlink{opus__types_8h_aa4d309d6f80b99dbabebc8f98879ab9a}{opus\+\_\+int32}}}]{len,  }\item[{\mbox{\hyperlink{opus__types_8h_acc9ed7cf60479eb81f9648c6ec27dc26}{opus\+\_\+int16}} $\ast$}]{pcm,  }\item[{int}]{frame\+\_\+size,  }\item[{int}]{decode\+\_\+fec }\end{DoxyParamCaption})}

Decode a multistream Opus packet. 
\begin{DoxyParams}[1]{Parameters}
 & {\em st} & {\ttfamily Opus\+M\+S\+Decoder$\ast$}\+: Multistream decoder state. \\
\hline
\mbox{\texttt{ in}}  & {\em data} & {\ttfamily const unsigned char$\ast$}\+: Input payload. Use a {\ttfamily N\+U\+LL} pointer to indicate packet loss. \\
\hline
 & {\em len} & {\ttfamily opus\+\_\+int32}\+: Number of bytes in payload. \\
\hline
\mbox{\texttt{ out}}  & {\em pcm} & {\ttfamily opus\+\_\+int16$\ast$}\+: Output signal, with interleaved samples. This must contain room for {\ttfamily frame\+\_\+size$\ast$channels} samples. \\
\hline
 & {\em frame\+\_\+size} & {\ttfamily int}\+: The number of samples per channel of available space in {\itshape pcm}. If this is less than the maximum packet duration (120 ms; 5760 for 48k\+Hz), this function will not be capable of decoding some packets. In the case of P\+LC (data==N\+U\+LL) or F\+EC (decode\+\_\+fec=1), then frame\+\_\+size needs to be exactly the duration of audio that is missing, otherwise the decoder will not be in the optimal state to decode the next incoming packet. For the P\+LC and F\+EC cases, frame\+\_\+size {\bfseries{must}} be a multiple of 2.\+5 ms. \\
\hline
 & {\em decode\+\_\+fec} & {\ttfamily int}\+: Flag (0 or 1) to request that any in-\/band forward error correction data be decoded. If no such data is available, the frame is decoded as if it were lost. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Number of samples decoded on success or a negative error code (see \mbox{\hyperlink{group__opus__errorcodes}{Error codes}}) on failure. 
\end{DoxyReturn}
\mbox{\Hypertarget{group__opus__multistream_ga32b004586f69b063a447e123e6a2c151}\label{group__opus__multistream_ga32b004586f69b063a447e123e6a2c151}} 
\index{Opus Multistream API@{Opus Multistream API}!opus\_multistream\_decode\_float@{opus\_multistream\_decode\_float}}
\index{opus\_multistream\_decode\_float@{opus\_multistream\_decode\_float}!Opus Multistream API@{Opus Multistream API}}
\subsubsection{\texorpdfstring{opus\_multistream\_decode\_float()}{opus\_multistream\_decode\_float()}}
{\footnotesize\ttfamily O\+P\+U\+S\+\_\+\+E\+X\+P\+O\+RT O\+P\+U\+S\+\_\+\+W\+A\+R\+N\+\_\+\+U\+N\+U\+S\+E\+D\+\_\+\+R\+E\+S\+U\+LT int opus\+\_\+multistream\+\_\+decode\+\_\+float (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{group__opus__multistream_gad3497495deb9a8ace82e76cd4f93e0e4}{Opus\+M\+S\+Decoder}} $\ast$}]{st,  }\item[{const unsigned char $\ast$}]{data,  }\item[{\mbox{\hyperlink{opus__types_8h_aa4d309d6f80b99dbabebc8f98879ab9a}{opus\+\_\+int32}}}]{len,  }\item[{float $\ast$}]{pcm,  }\item[{int}]{frame\+\_\+size,  }\item[{int}]{decode\+\_\+fec }\end{DoxyParamCaption})}

Decode a multistream Opus packet with floating point output. 
\begin{DoxyParams}[1]{Parameters}
 & {\em st} & {\ttfamily Opus\+M\+S\+Decoder$\ast$}\+: Multistream decoder state. \\
\hline
\mbox{\texttt{ in}}  & {\em data} & {\ttfamily const unsigned char$\ast$}\+: Input payload. Use a {\ttfamily N\+U\+LL} pointer to indicate packet loss. \\
\hline
 & {\em len} & {\ttfamily opus\+\_\+int32}\+: Number of bytes in payload. \\
\hline
\mbox{\texttt{ out}}  & {\em pcm} & {\ttfamily opus\+\_\+int16$\ast$}\+: Output signal, with interleaved samples. This must contain room for {\ttfamily frame\+\_\+size$\ast$channels} samples. \\
\hline
 & {\em frame\+\_\+size} & {\ttfamily int}\+: The number of samples per channel of available space in {\itshape pcm}. If this is less than the maximum packet duration (120 ms; 5760 for 48k\+Hz), this function will not be capable of decoding some packets. In the case of P\+LC (data==N\+U\+LL) or F\+EC (decode\+\_\+fec=1), then frame\+\_\+size needs to be exactly the duration of audio that is missing, otherwise the decoder will not be in the optimal state to decode the next incoming packet. For the P\+LC and F\+EC cases, frame\+\_\+size {\bfseries{must}} be a multiple of 2.\+5 ms. \\
\hline
 & {\em decode\+\_\+fec} & {\ttfamily int}\+: Flag (0 or 1) to request that any in-\/band forward error correction data be decoded. If no such data is available, the frame is decoded as if it were lost. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Number of samples decoded on success or a negative error code (see \mbox{\hyperlink{group__opus__errorcodes}{Error codes}}) on failure. 
\end{DoxyReturn}
\mbox{\Hypertarget{group__opus__multistream_ga0dc5378a3d4c65498cf530e450b56aa1}\label{group__opus__multistream_ga0dc5378a3d4c65498cf530e450b56aa1}} 
\index{Opus Multistream API@{Opus Multistream API}!opus\_multistream\_decoder\_create@{opus\_multistream\_decoder\_create}}
\index{opus\_multistream\_decoder\_create@{opus\_multistream\_decoder\_create}!Opus Multistream API@{Opus Multistream API}}
\subsubsection{\texorpdfstring{opus\_multistream\_decoder\_create()}{opus\_multistream\_decoder\_create()}}
{\footnotesize\ttfamily O\+P\+U\+S\+\_\+\+E\+X\+P\+O\+RT O\+P\+U\+S\+\_\+\+W\+A\+R\+N\+\_\+\+U\+N\+U\+S\+E\+D\+\_\+\+R\+E\+S\+U\+LT \mbox{\hyperlink{group__opus__multistream_gad3497495deb9a8ace82e76cd4f93e0e4}{Opus\+M\+S\+Decoder}}$\ast$ opus\+\_\+multistream\+\_\+decoder\+\_\+create (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{opus__types_8h_aa4d309d6f80b99dbabebc8f98879ab9a}{opus\+\_\+int32}}}]{Fs,  }\item[{int}]{channels,  }\item[{int}]{streams,  }\item[{int}]{coupled\+\_\+streams,  }\item[{const unsigned char $\ast$}]{mapping,  }\item[{int $\ast$}]{error }\end{DoxyParamCaption})}

Allocates and initializes a multistream decoder state. Call \mbox{\hyperlink{group__opus__multistream_ga314b439b06efd9463caa5039c1198f6c}{opus\+\_\+multistream\+\_\+decoder\+\_\+destroy()}} to release this object when finished. 
\begin{DoxyParams}[1]{Parameters}
 & {\em Fs} & {\ttfamily opus\+\_\+int32}\+: Sampling rate to decode at (in Hz). This must be one of 8000, 12000, 16000, 24000, or 48000. \\
\hline
 & {\em channels} & {\ttfamily int}\+: Number of channels to output. This must be at most 255. It may be different from the number of coded channels ({\ttfamily streams + coupled\+\_\+streams}). \\
\hline
 & {\em streams} & {\ttfamily int}\+: The total number of streams coded in the input. This must be no more than 255. \\
\hline
 & {\em coupled\+\_\+streams} & {\ttfamily int}\+: Number of streams to decode as coupled (2 channel) streams. This must be no larger than the total number of streams. Additionally, The total number of coded channels ({\ttfamily streams + coupled\+\_\+streams}) must be no more than 255. \\
\hline
\mbox{\texttt{ in}}  & {\em mapping} & {\ttfamily const unsigned char\mbox{[}channels\mbox{]}}\+: Mapping from coded channels to output channels, as described in \mbox{\hyperlink{group__opus__multistream}{Opus Multistream A\+PI}}. \\
\hline
\mbox{\texttt{ out}}  & {\em error} & {\ttfamily int $\ast$}\+: Returns \mbox{\hyperlink{group__opus__errorcodes_gaa44cf8a185e1b5cb940ef63eb4f02d21}{O\+P\+U\+S\+\_\+\+OK}} on success, or an error code (see \mbox{\hyperlink{group__opus__errorcodes}{Error codes}}) on failure. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{group__opus__multistream_ga3c6402c3bb276d7a152d9934ce948431}\label{group__opus__multistream_ga3c6402c3bb276d7a152d9934ce948431}} 
\index{Opus Multistream API@{Opus Multistream API}!opus\_multistream\_decoder\_ctl@{opus\_multistream\_decoder\_ctl}}
\index{opus\_multistream\_decoder\_ctl@{opus\_multistream\_decoder\_ctl}!Opus Multistream API@{Opus Multistream API}}
\subsubsection{\texorpdfstring{opus\_multistream\_decoder\_ctl()}{opus\_multistream\_decoder\_ctl()}}
{\footnotesize\ttfamily O\+P\+U\+S\+\_\+\+E\+X\+P\+O\+RT int opus\+\_\+multistream\+\_\+decoder\+\_\+ctl (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{group__opus__multistream_gad3497495deb9a8ace82e76cd4f93e0e4}{Opus\+M\+S\+Decoder}} $\ast$}]{st,  }\item[{int}]{request,  }\item[{}]{... }\end{DoxyParamCaption})}

Perform a C\+TL function on a multistream Opus decoder.

Generally the request and subsequent arguments are generated by a convenience macro. 
\begin{DoxyParams}{Parameters}
{\em st} & {\ttfamily Opus\+M\+S\+Decoder$\ast$}\+: Multistream decoder state. \\
\hline
{\em request} & This and all remaining parameters should be replaced by one of the convenience macros in \mbox{\hyperlink{group__opus__genericctls}{Generic C\+T\+Ls}}, \mbox{\hyperlink{group__opus__decoderctls}{Decoder related C\+T\+Ls}}, or \mbox{\hyperlink{group__opus__multistream__ctls}{Multistream specific encoder and decoder C\+T\+Ls}}. \\
\hline
\end{DoxyParams}
\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{group__opus__genericctls}{Generic C\+T\+Ls}} 

\mbox{\hyperlink{group__opus__decoderctls}{Decoder related C\+T\+Ls}} 

\mbox{\hyperlink{group__opus__multistream__ctls}{Multistream specific encoder and decoder C\+T\+Ls}} 
\end{DoxySeeAlso}
\mbox{\Hypertarget{group__opus__multistream_ga314b439b06efd9463caa5039c1198f6c}\label{group__opus__multistream_ga314b439b06efd9463caa5039c1198f6c}} 
\index{Opus Multistream API@{Opus Multistream API}!opus\_multistream\_decoder\_destroy@{opus\_multistream\_decoder\_destroy}}
\index{opus\_multistream\_decoder\_destroy@{opus\_multistream\_decoder\_destroy}!Opus Multistream API@{Opus Multistream API}}
\subsubsection{\texorpdfstring{opus\_multistream\_decoder\_destroy()}{opus\_multistream\_decoder\_destroy()}}
{\footnotesize\ttfamily O\+P\+U\+S\+\_\+\+E\+X\+P\+O\+RT \mbox{\hyperlink{_s_d_l__opengles2__gl2ext_8h_ae5d8fa23ad07c48bb609509eae494c95}{void}} opus\+\_\+multistream\+\_\+decoder\+\_\+destroy (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{group__opus__multistream_gad3497495deb9a8ace82e76cd4f93e0e4}{Opus\+M\+S\+Decoder}} $\ast$}]{st }\end{DoxyParamCaption})}

Frees an {\ttfamily Opus\+M\+S\+Decoder} allocated by \mbox{\hyperlink{group__opus__multistream_ga0dc5378a3d4c65498cf530e450b56aa1}{opus\+\_\+multistream\+\_\+decoder\+\_\+create()}}. 
\begin{DoxyParams}{Parameters}
{\em st} & {\ttfamily Opus\+M\+S\+Decoder}\+: Multistream decoder state to be freed. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{group__opus__multistream_gad4e534e2ee78039fff01cd0c6f7c1dd1}\label{group__opus__multistream_gad4e534e2ee78039fff01cd0c6f7c1dd1}} 
\index{Opus Multistream API@{Opus Multistream API}!opus\_multistream\_decoder\_get\_size@{opus\_multistream\_decoder\_get\_size}}
\index{opus\_multistream\_decoder\_get\_size@{opus\_multistream\_decoder\_get\_size}!Opus Multistream API@{Opus Multistream API}}
\subsubsection{\texorpdfstring{opus\_multistream\_decoder\_get\_size()}{opus\_multistream\_decoder\_get\_size()}}
{\footnotesize\ttfamily O\+P\+U\+S\+\_\+\+E\+X\+P\+O\+RT O\+P\+U\+S\+\_\+\+W\+A\+R\+N\+\_\+\+U\+N\+U\+S\+E\+D\+\_\+\+R\+E\+S\+U\+LT \mbox{\hyperlink{opus__types_8h_aa4d309d6f80b99dbabebc8f98879ab9a}{opus\+\_\+int32}} opus\+\_\+multistream\+\_\+decoder\+\_\+get\+\_\+size (\begin{DoxyParamCaption}\item[{int}]{streams,  }\item[{int}]{coupled\+\_\+streams }\end{DoxyParamCaption})}

Gets the size of an {\ttfamily Opus\+M\+S\+Decoder} structure. 
\begin{DoxyParams}{Parameters}
{\em streams} & {\ttfamily int}\+: The total number of streams coded in the input. This must be no more than 255. \\
\hline
{\em coupled\+\_\+streams} & {\ttfamily int}\+: Number streams to decode as coupled (2 channel) streams. This must be no larger than the total number of streams. Additionally, The total number of coded channels ({\ttfamily streams + coupled\+\_\+streams}) must be no more than 255. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The size in bytes on success, or a negative error code (see \mbox{\hyperlink{group__opus__errorcodes}{Error codes}}) on error. 
\end{DoxyReturn}
\mbox{\Hypertarget{group__opus__multistream_gac9680d4205a5ea95785e747f0d2e393b}\label{group__opus__multistream_gac9680d4205a5ea95785e747f0d2e393b}} 
\index{Opus Multistream API@{Opus Multistream API}!opus\_multistream\_decoder\_init@{opus\_multistream\_decoder\_init}}
\index{opus\_multistream\_decoder\_init@{opus\_multistream\_decoder\_init}!Opus Multistream API@{Opus Multistream API}}
\subsubsection{\texorpdfstring{opus\_multistream\_decoder\_init()}{opus\_multistream\_decoder\_init()}}
{\footnotesize\ttfamily O\+P\+U\+S\+\_\+\+E\+X\+P\+O\+RT int opus\+\_\+multistream\+\_\+decoder\+\_\+init (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{group__opus__multistream_gad3497495deb9a8ace82e76cd4f93e0e4}{Opus\+M\+S\+Decoder}} $\ast$}]{st,  }\item[{\mbox{\hyperlink{opus__types_8h_aa4d309d6f80b99dbabebc8f98879ab9a}{opus\+\_\+int32}}}]{Fs,  }\item[{int}]{channels,  }\item[{int}]{streams,  }\item[{int}]{coupled\+\_\+streams,  }\item[{const unsigned char $\ast$}]{mapping }\end{DoxyParamCaption})}

Intialize a previously allocated decoder state object. The memory pointed to by {\itshape st} must be at least the size returned by \mbox{\hyperlink{group__opus__multistream_ga598e82225e53af23017e0c96f4eaf3b4}{opus\+\_\+multistream\+\_\+encoder\+\_\+get\+\_\+size()}}. This is intended for applications which use their own allocator instead of malloc. To reset a previously initialized state, use the \mbox{\hyperlink{group__opus__genericctls_gadc74e4fa8bcdf9994187d52d92207337}{O\+P\+U\+S\+\_\+\+R\+E\+S\+E\+T\+\_\+\+S\+T\+A\+TE}} C\+TL. \begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{group__opus__multistream_ga0dc5378a3d4c65498cf530e450b56aa1}{opus\+\_\+multistream\+\_\+decoder\+\_\+create}} 

opus\+\_\+multistream\+\_\+deocder\+\_\+get\+\_\+size 
\end{DoxySeeAlso}

\begin{DoxyParams}[1]{Parameters}
 & {\em st} & {\ttfamily Opus\+M\+S\+Encoder$\ast$}\+: Multistream encoder state to initialize. \\
\hline
 & {\em Fs} & {\ttfamily opus\+\_\+int32}\+: Sampling rate to decode at (in Hz). This must be one of 8000, 12000, 16000, 24000, or 48000. \\
\hline
 & {\em channels} & {\ttfamily int}\+: Number of channels to output. This must be at most 255. It may be different from the number of coded channels ({\ttfamily streams + coupled\+\_\+streams}). \\
\hline
 & {\em streams} & {\ttfamily int}\+: The total number of streams coded in the input. This must be no more than 255. \\
\hline
 & {\em coupled\+\_\+streams} & {\ttfamily int}\+: Number of streams to decode as coupled (2 channel) streams. This must be no larger than the total number of streams. Additionally, The total number of coded channels ({\ttfamily streams + coupled\+\_\+streams}) must be no more than 255. \\
\hline
\mbox{\texttt{ in}}  & {\em mapping} & {\ttfamily const unsigned char\mbox{[}channels\mbox{]}}\+: Mapping from coded channels to output channels, as described in \mbox{\hyperlink{group__opus__multistream}{Opus Multistream A\+PI}}. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\mbox{\hyperlink{group__opus__errorcodes_gaa44cf8a185e1b5cb940ef63eb4f02d21}{O\+P\+U\+S\+\_\+\+OK}} on success, or an error code (see \mbox{\hyperlink{group__opus__errorcodes}{Error codes}}) on failure. 
\end{DoxyReturn}
\mbox{\Hypertarget{group__opus__multistream_ga5276a2212541e65624f52e906d3dff42}\label{group__opus__multistream_ga5276a2212541e65624f52e906d3dff42}} 
\index{Opus Multistream API@{Opus Multistream API}!opus\_multistream\_encode@{opus\_multistream\_encode}}
\index{opus\_multistream\_encode@{opus\_multistream\_encode}!Opus Multistream API@{Opus Multistream API}}
\subsubsection{\texorpdfstring{opus\_multistream\_encode()}{opus\_multistream\_encode()}}
{\footnotesize\ttfamily O\+P\+U\+S\+\_\+\+E\+X\+P\+O\+RT O\+P\+U\+S\+\_\+\+W\+A\+R\+N\+\_\+\+U\+N\+U\+S\+E\+D\+\_\+\+R\+E\+S\+U\+LT int opus\+\_\+multistream\+\_\+encode (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{group__opus__multistream_gae5826674d142fc873ebc1d781c507dd7}{Opus\+M\+S\+Encoder}} $\ast$}]{st,  }\item[{const \mbox{\hyperlink{opus__types_8h_acc9ed7cf60479eb81f9648c6ec27dc26}{opus\+\_\+int16}} $\ast$}]{pcm,  }\item[{int}]{frame\+\_\+size,  }\item[{unsigned char $\ast$}]{data,  }\item[{\mbox{\hyperlink{opus__types_8h_aa4d309d6f80b99dbabebc8f98879ab9a}{opus\+\_\+int32}}}]{max\+\_\+data\+\_\+bytes }\end{DoxyParamCaption})}

Encodes a multistream Opus frame. 
\begin{DoxyParams}[1]{Parameters}
 & {\em st} & {\ttfamily Opus\+M\+S\+Encoder$\ast$}\+: Multistream encoder state. \\
\hline
\mbox{\texttt{ in}}  & {\em pcm} & {\ttfamily const opus\+\_\+int16$\ast$}\+: The input signal as interleaved samples. This must contain {\ttfamily frame\+\_\+size$\ast$channels} samples. \\
\hline
 & {\em frame\+\_\+size} & {\ttfamily int}\+: Number of samples per channel in the input signal. This must be an Opus frame size for the encoder\textquotesingle{}s sampling rate. For example, at 48 k\+Hz the permitted values are 120, 240, 480, 960, 1920, and 2880. Passing in a duration of less than 10 ms (480 samples at 48 k\+Hz) will prevent the encoder from using the L\+PC or hybrid modes. \\
\hline
\mbox{\texttt{ out}}  & {\em data} & {\ttfamily unsigned char$\ast$}\+: Output payload. This must contain storage for at least {\itshape max\+\_\+data\+\_\+bytes}. \\
\hline
\mbox{\texttt{ in}}  & {\em max\+\_\+data\+\_\+bytes} & {\ttfamily opus\+\_\+int32}\+: Size of the allocated memory for the output payload. This may be used to impose an upper limit on the instant bitrate, but should not be used as the only bitrate control. Use \mbox{\hyperlink{group__opus__encoderctls_ga0bb51947e355b33d0cb358463b5101a7}{O\+P\+U\+S\+\_\+\+S\+E\+T\+\_\+\+B\+I\+T\+R\+A\+TE}} to control the bitrate. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The length of the encoded packet (in bytes) on success or a negative error code (see \mbox{\hyperlink{group__opus__errorcodes}{Error codes}}) on failure. 
\end{DoxyReturn}
\mbox{\Hypertarget{group__opus__multistream_gabc78b732d2e7b6ceb27c63888255ef56}\label{group__opus__multistream_gabc78b732d2e7b6ceb27c63888255ef56}} 
\index{Opus Multistream API@{Opus Multistream API}!opus\_multistream\_encode\_float@{opus\_multistream\_encode\_float}}
\index{opus\_multistream\_encode\_float@{opus\_multistream\_encode\_float}!Opus Multistream API@{Opus Multistream API}}
\subsubsection{\texorpdfstring{opus\_multistream\_encode\_float()}{opus\_multistream\_encode\_float()}}
{\footnotesize\ttfamily O\+P\+U\+S\+\_\+\+E\+X\+P\+O\+RT O\+P\+U\+S\+\_\+\+W\+A\+R\+N\+\_\+\+U\+N\+U\+S\+E\+D\+\_\+\+R\+E\+S\+U\+LT int opus\+\_\+multistream\+\_\+encode\+\_\+float (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{group__opus__multistream_gae5826674d142fc873ebc1d781c507dd7}{Opus\+M\+S\+Encoder}} $\ast$}]{st,  }\item[{const float $\ast$}]{pcm,  }\item[{int}]{frame\+\_\+size,  }\item[{unsigned char $\ast$}]{data,  }\item[{\mbox{\hyperlink{opus__types_8h_aa4d309d6f80b99dbabebc8f98879ab9a}{opus\+\_\+int32}}}]{max\+\_\+data\+\_\+bytes }\end{DoxyParamCaption})}

Encodes a multistream Opus frame from floating point input. 
\begin{DoxyParams}[1]{Parameters}
 & {\em st} & {\ttfamily Opus\+M\+S\+Encoder$\ast$}\+: Multistream encoder state. \\
\hline
\mbox{\texttt{ in}}  & {\em pcm} & {\ttfamily const float$\ast$}\+: The input signal as interleaved samples with a normal range of +/-\/1.0. Samples with a range beyond +/-\/1.0 are supported but will be clipped by decoders using the integer A\+PI and should only be used if it is known that the far end supports extended dynamic range. This must contain {\ttfamily frame\+\_\+size$\ast$channels} samples. \\
\hline
 & {\em frame\+\_\+size} & {\ttfamily int}\+: Number of samples per channel in the input signal. This must be an Opus frame size for the encoder\textquotesingle{}s sampling rate. For example, at 48 k\+Hz the permitted values are 120, 240, 480, 960, 1920, and 2880. Passing in a duration of less than 10 ms (480 samples at 48 k\+Hz) will prevent the encoder from using the L\+PC or hybrid modes. \\
\hline
\mbox{\texttt{ out}}  & {\em data} & {\ttfamily unsigned char$\ast$}\+: Output payload. This must contain storage for at least {\itshape max\+\_\+data\+\_\+bytes}. \\
\hline
\mbox{\texttt{ in}}  & {\em max\+\_\+data\+\_\+bytes} & {\ttfamily opus\+\_\+int32}\+: Size of the allocated memory for the output payload. This may be used to impose an upper limit on the instant bitrate, but should not be used as the only bitrate control. Use \mbox{\hyperlink{group__opus__encoderctls_ga0bb51947e355b33d0cb358463b5101a7}{O\+P\+U\+S\+\_\+\+S\+E\+T\+\_\+\+B\+I\+T\+R\+A\+TE}} to control the bitrate. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The length of the encoded packet (in bytes) on success or a negative error code (see \mbox{\hyperlink{group__opus__errorcodes}{Error codes}}) on failure. 
\end{DoxyReturn}
\mbox{\Hypertarget{group__opus__multistream_ga984c19f4faa4db82370eb907f8eaf452}\label{group__opus__multistream_ga984c19f4faa4db82370eb907f8eaf452}} 
\index{Opus Multistream API@{Opus Multistream API}!opus\_multistream\_encoder\_create@{opus\_multistream\_encoder\_create}}
\index{opus\_multistream\_encoder\_create@{opus\_multistream\_encoder\_create}!Opus Multistream API@{Opus Multistream API}}
\subsubsection{\texorpdfstring{opus\_multistream\_encoder\_create()}{opus\_multistream\_encoder\_create()}}
{\footnotesize\ttfamily O\+P\+U\+S\+\_\+\+E\+X\+P\+O\+RT O\+P\+U\+S\+\_\+\+W\+A\+R\+N\+\_\+\+U\+N\+U\+S\+E\+D\+\_\+\+R\+E\+S\+U\+LT \mbox{\hyperlink{group__opus__multistream_gae5826674d142fc873ebc1d781c507dd7}{Opus\+M\+S\+Encoder}}$\ast$ opus\+\_\+multistream\+\_\+encoder\+\_\+create (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{opus__types_8h_aa4d309d6f80b99dbabebc8f98879ab9a}{opus\+\_\+int32}}}]{Fs,  }\item[{int}]{channels,  }\item[{int}]{streams,  }\item[{int}]{coupled\+\_\+streams,  }\item[{const unsigned char $\ast$}]{mapping,  }\item[{int}]{application,  }\item[{int $\ast$}]{error }\end{DoxyParamCaption})}

Allocates and initializes a multistream encoder state. Call \mbox{\hyperlink{group__opus__multistream_ga24b8a4ceb20a142069084cb1edd28a30}{opus\+\_\+multistream\+\_\+encoder\+\_\+destroy()}} to release this object when finished. 
\begin{DoxyParams}[1]{Parameters}
 & {\em Fs} & {\ttfamily opus\+\_\+int32}\+: Sampling rate of the input signal (in Hz). This must be one of 8000, 12000, 16000, 24000, or 48000. \\
\hline
 & {\em channels} & {\ttfamily int}\+: Number of channels in the input signal. This must be at most 255. It may be greater than the number of coded channels ({\ttfamily streams + coupled\+\_\+streams}). \\
\hline
 & {\em streams} & {\ttfamily int}\+: The total number of streams to encode from the input. This must be no more than the number of channels. \\
\hline
 & {\em coupled\+\_\+streams} & {\ttfamily int}\+: Number of coupled (2 channel) streams to encode. This must be no larger than the total number of streams. Additionally, The total number of encoded channels ({\ttfamily streams + coupled\+\_\+streams}) must be no more than the number of input channels. \\
\hline
\mbox{\texttt{ in}}  & {\em mapping} & {\ttfamily const unsigned char\mbox{[}channels\mbox{]}}\+: Mapping from encoded channels to input channels, as described in \mbox{\hyperlink{group__opus__multistream}{Opus Multistream A\+PI}}. As an extra constraint, the multistream encoder does not allow encoding coupled streams for which one channel is unused since this is never a good idea. \\
\hline
 & {\em application} & {\ttfamily int}\+: The target encoder application. This must be one of the following\+: 
\begin{DoxyDescription}
\item[\mbox{\hyperlink{group__opus__ctlvalues_ga07884aa018303a419d1f7acb2f3fa669}{O\+P\+U\+S\+\_\+\+A\+P\+P\+L\+I\+C\+A\+T\+I\+O\+N\+\_\+\+V\+O\+IP}} ]Process signal for improved speech intelligibility. 
\item[\mbox{\hyperlink{group__opus__ctlvalues_ga5909f7cb35c04f1110026c6889edd345}{O\+P\+U\+S\+\_\+\+A\+P\+P\+L\+I\+C\+A\+T\+I\+O\+N\+\_\+\+A\+U\+D\+IO}} ]Favor faithfulness to the original input. 
\item[\mbox{\hyperlink{group__opus__ctlvalues_ga592232fb39db60c1369989c5c5d19a07}{O\+P\+U\+S\+\_\+\+A\+P\+P\+L\+I\+C\+A\+T\+I\+O\+N\+\_\+\+R\+E\+S\+T\+R\+I\+C\+T\+E\+D\+\_\+\+L\+O\+W\+D\+E\+L\+AY}} ]Configure the minimum possible coding delay by disabling certain modes of operation. 
\end{DoxyDescription}\\
\hline
\mbox{\texttt{ out}}  & {\em error} & {\ttfamily int $\ast$}\+: Returns \mbox{\hyperlink{group__opus__errorcodes_gaa44cf8a185e1b5cb940ef63eb4f02d21}{O\+P\+U\+S\+\_\+\+OK}} on success, or an error code (see \mbox{\hyperlink{group__opus__errorcodes}{Error codes}}) on failure. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{group__opus__multistream_ga0f8756c84c7c62a38f99fb5cd6ed68af}\label{group__opus__multistream_ga0f8756c84c7c62a38f99fb5cd6ed68af}} 
\index{Opus Multistream API@{Opus Multistream API}!opus\_multistream\_encoder\_ctl@{opus\_multistream\_encoder\_ctl}}
\index{opus\_multistream\_encoder\_ctl@{opus\_multistream\_encoder\_ctl}!Opus Multistream API@{Opus Multistream API}}
\subsubsection{\texorpdfstring{opus\_multistream\_encoder\_ctl()}{opus\_multistream\_encoder\_ctl()}}
{\footnotesize\ttfamily O\+P\+U\+S\+\_\+\+E\+X\+P\+O\+RT int opus\+\_\+multistream\+\_\+encoder\+\_\+ctl (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{group__opus__multistream_gae5826674d142fc873ebc1d781c507dd7}{Opus\+M\+S\+Encoder}} $\ast$}]{st,  }\item[{int}]{request,  }\item[{}]{... }\end{DoxyParamCaption})}

Perform a C\+TL function on a multistream Opus encoder.

Generally the request and subsequent arguments are generated by a convenience macro. 
\begin{DoxyParams}{Parameters}
{\em st} & {\ttfamily Opus\+M\+S\+Encoder$\ast$}\+: Multistream encoder state. \\
\hline
{\em request} & This and all remaining parameters should be replaced by one of the convenience macros in \mbox{\hyperlink{group__opus__genericctls}{Generic C\+T\+Ls}}, \mbox{\hyperlink{group__opus__encoderctls}{Encoder related C\+T\+Ls}}, or \mbox{\hyperlink{group__opus__multistream__ctls}{Multistream specific encoder and decoder C\+T\+Ls}}. \\
\hline
\end{DoxyParams}
\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{group__opus__genericctls}{Generic C\+T\+Ls}} 

\mbox{\hyperlink{group__opus__encoderctls}{Encoder related C\+T\+Ls}} 

\mbox{\hyperlink{group__opus__multistream__ctls}{Multistream specific encoder and decoder C\+T\+Ls}} 
\end{DoxySeeAlso}
\mbox{\Hypertarget{group__opus__multistream_ga24b8a4ceb20a142069084cb1edd28a30}\label{group__opus__multistream_ga24b8a4ceb20a142069084cb1edd28a30}} 
\index{Opus Multistream API@{Opus Multistream API}!opus\_multistream\_encoder\_destroy@{opus\_multistream\_encoder\_destroy}}
\index{opus\_multistream\_encoder\_destroy@{opus\_multistream\_encoder\_destroy}!Opus Multistream API@{Opus Multistream API}}
\subsubsection{\texorpdfstring{opus\_multistream\_encoder\_destroy()}{opus\_multistream\_encoder\_destroy()}}
{\footnotesize\ttfamily O\+P\+U\+S\+\_\+\+E\+X\+P\+O\+RT \mbox{\hyperlink{_s_d_l__opengles2__gl2ext_8h_ae5d8fa23ad07c48bb609509eae494c95}{void}} opus\+\_\+multistream\+\_\+encoder\+\_\+destroy (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{group__opus__multistream_gae5826674d142fc873ebc1d781c507dd7}{Opus\+M\+S\+Encoder}} $\ast$}]{st }\end{DoxyParamCaption})}

Frees an {\ttfamily Opus\+M\+S\+Encoder} allocated by \mbox{\hyperlink{group__opus__multistream_ga984c19f4faa4db82370eb907f8eaf452}{opus\+\_\+multistream\+\_\+encoder\+\_\+create()}}. 
\begin{DoxyParams}{Parameters}
{\em st} & {\ttfamily Opus\+M\+S\+Encoder$\ast$}\+: Multistream encoder state to be freed. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{group__opus__multistream_ga598e82225e53af23017e0c96f4eaf3b4}\label{group__opus__multistream_ga598e82225e53af23017e0c96f4eaf3b4}} 
\index{Opus Multistream API@{Opus Multistream API}!opus\_multistream\_encoder\_get\_size@{opus\_multistream\_encoder\_get\_size}}
\index{opus\_multistream\_encoder\_get\_size@{opus\_multistream\_encoder\_get\_size}!Opus Multistream API@{Opus Multistream API}}
\subsubsection{\texorpdfstring{opus\_multistream\_encoder\_get\_size()}{opus\_multistream\_encoder\_get\_size()}}
{\footnotesize\ttfamily O\+P\+U\+S\+\_\+\+E\+X\+P\+O\+RT O\+P\+U\+S\+\_\+\+W\+A\+R\+N\+\_\+\+U\+N\+U\+S\+E\+D\+\_\+\+R\+E\+S\+U\+LT \mbox{\hyperlink{opus__types_8h_aa4d309d6f80b99dbabebc8f98879ab9a}{opus\+\_\+int32}} opus\+\_\+multistream\+\_\+encoder\+\_\+get\+\_\+size (\begin{DoxyParamCaption}\item[{int}]{streams,  }\item[{int}]{coupled\+\_\+streams }\end{DoxyParamCaption})}

Gets the size of an Opus\+M\+S\+Encoder structure. 
\begin{DoxyParams}{Parameters}
{\em streams} & {\ttfamily int}\+: The total number of streams to encode from the input. This must be no more than 255. \\
\hline
{\em coupled\+\_\+streams} & {\ttfamily int}\+: Number of coupled (2 channel) streams to encode. This must be no larger than the total number of streams. Additionally, The total number of encoded channels ({\ttfamily streams + coupled\+\_\+streams}) must be no more than 255. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The size in bytes on success, or a negative error code (see \mbox{\hyperlink{group__opus__errorcodes}{Error codes}}) on error. 
\end{DoxyReturn}
\mbox{\Hypertarget{group__opus__multistream_gaf9045180b3a93d7cc3d1197859b767a8}\label{group__opus__multistream_gaf9045180b3a93d7cc3d1197859b767a8}} 
\index{Opus Multistream API@{Opus Multistream API}!opus\_multistream\_encoder\_init@{opus\_multistream\_encoder\_init}}
\index{opus\_multistream\_encoder\_init@{opus\_multistream\_encoder\_init}!Opus Multistream API@{Opus Multistream API}}
\subsubsection{\texorpdfstring{opus\_multistream\_encoder\_init()}{opus\_multistream\_encoder\_init()}}
{\footnotesize\ttfamily O\+P\+U\+S\+\_\+\+E\+X\+P\+O\+RT int opus\+\_\+multistream\+\_\+encoder\+\_\+init (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{group__opus__multistream_gae5826674d142fc873ebc1d781c507dd7}{Opus\+M\+S\+Encoder}} $\ast$}]{st,  }\item[{\mbox{\hyperlink{opus__types_8h_aa4d309d6f80b99dbabebc8f98879ab9a}{opus\+\_\+int32}}}]{Fs,  }\item[{int}]{channels,  }\item[{int}]{streams,  }\item[{int}]{coupled\+\_\+streams,  }\item[{const unsigned char $\ast$}]{mapping,  }\item[{int}]{application }\end{DoxyParamCaption})}

Initialize a previously allocated multistream encoder state. The memory pointed to by {\itshape st} must be at least the size returned by \mbox{\hyperlink{group__opus__multistream_ga598e82225e53af23017e0c96f4eaf3b4}{opus\+\_\+multistream\+\_\+encoder\+\_\+get\+\_\+size()}}. This is intended for applications which use their own allocator instead of malloc. To reset a previously initialized state, use the \mbox{\hyperlink{group__opus__genericctls_gadc74e4fa8bcdf9994187d52d92207337}{O\+P\+U\+S\+\_\+\+R\+E\+S\+E\+T\+\_\+\+S\+T\+A\+TE}} C\+TL. \begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{group__opus__multistream_ga984c19f4faa4db82370eb907f8eaf452}{opus\+\_\+multistream\+\_\+encoder\+\_\+create}} 

\mbox{\hyperlink{group__opus__multistream_ga598e82225e53af23017e0c96f4eaf3b4}{opus\+\_\+multistream\+\_\+encoder\+\_\+get\+\_\+size}} 
\end{DoxySeeAlso}

\begin{DoxyParams}[1]{Parameters}
 & {\em st} & {\ttfamily Opus\+M\+S\+Encoder$\ast$}\+: Multistream encoder state to initialize. \\
\hline
 & {\em Fs} & {\ttfamily opus\+\_\+int32}\+: Sampling rate of the input signal (in Hz). This must be one of 8000, 12000, 16000, 24000, or 48000. \\
\hline
 & {\em channels} & {\ttfamily int}\+: Number of channels in the input signal. This must be at most 255. It may be greater than the number of coded channels ({\ttfamily streams + coupled\+\_\+streams}). \\
\hline
 & {\em streams} & {\ttfamily int}\+: The total number of streams to encode from the input. This must be no more than the number of channels. \\
\hline
 & {\em coupled\+\_\+streams} & {\ttfamily int}\+: Number of coupled (2 channel) streams to encode. This must be no larger than the total number of streams. Additionally, The total number of encoded channels ({\ttfamily streams + coupled\+\_\+streams}) must be no more than the number of input channels. \\
\hline
\mbox{\texttt{ in}}  & {\em mapping} & {\ttfamily const unsigned char\mbox{[}channels\mbox{]}}\+: Mapping from encoded channels to input channels, as described in \mbox{\hyperlink{group__opus__multistream}{Opus Multistream A\+PI}}. As an extra constraint, the multistream encoder does not allow encoding coupled streams for which one channel is unused since this is never a good idea. \\
\hline
 & {\em application} & {\ttfamily int}\+: The target encoder application. This must be one of the following\+: 
\begin{DoxyDescription}
\item[\mbox{\hyperlink{group__opus__ctlvalues_ga07884aa018303a419d1f7acb2f3fa669}{O\+P\+U\+S\+\_\+\+A\+P\+P\+L\+I\+C\+A\+T\+I\+O\+N\+\_\+\+V\+O\+IP}} ]Process signal for improved speech intelligibility. 
\item[\mbox{\hyperlink{group__opus__ctlvalues_ga5909f7cb35c04f1110026c6889edd345}{O\+P\+U\+S\+\_\+\+A\+P\+P\+L\+I\+C\+A\+T\+I\+O\+N\+\_\+\+A\+U\+D\+IO}} ]Favor faithfulness to the original input. 
\item[\mbox{\hyperlink{group__opus__ctlvalues_ga592232fb39db60c1369989c5c5d19a07}{O\+P\+U\+S\+\_\+\+A\+P\+P\+L\+I\+C\+A\+T\+I\+O\+N\+\_\+\+R\+E\+S\+T\+R\+I\+C\+T\+E\+D\+\_\+\+L\+O\+W\+D\+E\+L\+AY}} ]Configure the minimum possible coding delay by disabling certain modes of operation. 
\end{DoxyDescription}\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\mbox{\hyperlink{group__opus__errorcodes_gaa44cf8a185e1b5cb940ef63eb4f02d21}{O\+P\+U\+S\+\_\+\+OK}} on success, or an error code (see \mbox{\hyperlink{group__opus__errorcodes}{Error codes}}) on failure. 
\end{DoxyReturn}
\mbox{\Hypertarget{group__opus__multistream_ga1358d7af19572d163ec982447aa20ee9}\label{group__opus__multistream_ga1358d7af19572d163ec982447aa20ee9}} 
\index{Opus Multistream API@{Opus Multistream API}!opus\_multistream\_surround\_encoder\_create@{opus\_multistream\_surround\_encoder\_create}}
\index{opus\_multistream\_surround\_encoder\_create@{opus\_multistream\_surround\_encoder\_create}!Opus Multistream API@{Opus Multistream API}}
\subsubsection{\texorpdfstring{opus\_multistream\_surround\_encoder\_create()}{opus\_multistream\_surround\_encoder\_create()}}
{\footnotesize\ttfamily O\+P\+U\+S\+\_\+\+E\+X\+P\+O\+RT O\+P\+U\+S\+\_\+\+W\+A\+R\+N\+\_\+\+U\+N\+U\+S\+E\+D\+\_\+\+R\+E\+S\+U\+LT \mbox{\hyperlink{group__opus__multistream_gae5826674d142fc873ebc1d781c507dd7}{Opus\+M\+S\+Encoder}}$\ast$ opus\+\_\+multistream\+\_\+surround\+\_\+encoder\+\_\+create (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{opus__types_8h_aa4d309d6f80b99dbabebc8f98879ab9a}{opus\+\_\+int32}}}]{Fs,  }\item[{int}]{channels,  }\item[{int}]{mapping\+\_\+family,  }\item[{int $\ast$}]{streams,  }\item[{int $\ast$}]{coupled\+\_\+streams,  }\item[{unsigned char $\ast$}]{mapping,  }\item[{int}]{application,  }\item[{int $\ast$}]{error }\end{DoxyParamCaption})}

\mbox{\Hypertarget{group__opus__multistream_ga21bf3d342217f28822f676b17bd21144}\label{group__opus__multistream_ga21bf3d342217f28822f676b17bd21144}} 
\index{Opus Multistream API@{Opus Multistream API}!opus\_multistream\_surround\_encoder\_get\_size@{opus\_multistream\_surround\_encoder\_get\_size}}
\index{opus\_multistream\_surround\_encoder\_get\_size@{opus\_multistream\_surround\_encoder\_get\_size}!Opus Multistream API@{Opus Multistream API}}
\subsubsection{\texorpdfstring{opus\_multistream\_surround\_encoder\_get\_size()}{opus\_multistream\_surround\_encoder\_get\_size()}}
{\footnotesize\ttfamily O\+P\+U\+S\+\_\+\+E\+X\+P\+O\+RT O\+P\+U\+S\+\_\+\+W\+A\+R\+N\+\_\+\+U\+N\+U\+S\+E\+D\+\_\+\+R\+E\+S\+U\+LT \mbox{\hyperlink{opus__types_8h_aa4d309d6f80b99dbabebc8f98879ab9a}{opus\+\_\+int32}} opus\+\_\+multistream\+\_\+surround\+\_\+encoder\+\_\+get\+\_\+size (\begin{DoxyParamCaption}\item[{int}]{channels,  }\item[{int}]{mapping\+\_\+family }\end{DoxyParamCaption})}

\mbox{\Hypertarget{group__opus__multistream_ga786d90cfe8f8b8f371b0137ac76b1559}\label{group__opus__multistream_ga786d90cfe8f8b8f371b0137ac76b1559}} 
\index{Opus Multistream API@{Opus Multistream API}!opus\_multistream\_surround\_encoder\_init@{opus\_multistream\_surround\_encoder\_init}}
\index{opus\_multistream\_surround\_encoder\_init@{opus\_multistream\_surround\_encoder\_init}!Opus Multistream API@{Opus Multistream API}}
\subsubsection{\texorpdfstring{opus\_multistream\_surround\_encoder\_init()}{opus\_multistream\_surround\_encoder\_init()}}
{\footnotesize\ttfamily O\+P\+U\+S\+\_\+\+E\+X\+P\+O\+RT int opus\+\_\+multistream\+\_\+surround\+\_\+encoder\+\_\+init (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{group__opus__multistream_gae5826674d142fc873ebc1d781c507dd7}{Opus\+M\+S\+Encoder}} $\ast$}]{st,  }\item[{\mbox{\hyperlink{opus__types_8h_aa4d309d6f80b99dbabebc8f98879ab9a}{opus\+\_\+int32}}}]{Fs,  }\item[{int}]{channels,  }\item[{int}]{mapping\+\_\+family,  }\item[{int $\ast$}]{streams,  }\item[{int $\ast$}]{coupled\+\_\+streams,  }\item[{unsigned char $\ast$}]{mapping,  }\item[{int}]{application }\end{DoxyParamCaption})}

